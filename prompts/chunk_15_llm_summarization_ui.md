# Chunk 15: LLM Summarization UI Interaction

**Goal:** Implement the user interface elements in the Meeting Detail Pane to trigger LLM summarization and display the results or errors.

**Context:** Connects the frontend UI for summarization (button, display area) with the backend API calling logic (Chunk 14).

**Requirements:**

1.  **Summarization Trigger UI (Renderer - Summary Tab):**

    - Locate the `[Generate Summary]` button within the "Summary" tab (identified in Chunk 4).
    - **Enable/Disable Logic:**
      - The button should be _enabled_ only if:
        - A transcript exists for the selected meeting (status is 'completed').
        - At least one LLM service (Ollama, Claude, or Gemini) has its API key/URL configured in Settings.
      - Otherwise, the button should be disabled. Add a tooltip explaining why if disabled (e.g., "Transcript required" or "Configure LLM API key in Settings").

2.  **LLM Service Selection (Renderer):**

    - When the `[Generate Summary]` button is clicked:
      - Check which LLM services are configured (based on loaded settings).
      - If _only one_ service is configured, proceed directly using that service.
      - If _multiple_ services are configured, display a simple selection mechanism (e.g., a small dropdown/modal/button group) prompting the user: "Summarize using: [Ollama] [Claude] [Gemini]".

3.  **Initiating Summarization (Renderer):**

    - Once a service is selected (implicitly or explicitly):
      - Get the `eventId` of the currently selected meeting.
      - Show a loading indicator in the Summary tab (e.g., "Generating summary with [Service Name]..."). Disable the Generate button.
      - Call the IPC channel: `ipcRenderer.invoke('generate-summary', selectedEvent.id, selectedServiceType)`.

4.  **Displaying Results (Renderer - Summary Tab):**

    - Handle the promise returned by `invoke('generate-summary')`:
      - **On Success:**
        - Receive the summary text.
        - Display the summary text in the main area of the Summary tab (e.g., within a `<p>` or `<div>`).
        - Optionally, add a small note indicating which service generated it (e.g., "Summary generated by Claude.").
        - Hide the loading indicator. Re-enable the Generate button (or change it to "Regenerate Summary").
        - Trigger saving the summary to local storage (using Chunk 12 mechanism via IPC).
      - **On Failure:**
        - Receive the error object/message.
        - Hide the loading indicator.
        - Display an error message: "Failed to generate summary: [Error Message]".
        - Re-enable the Generate button.

5.  **Loading Existing Summaries (Renderer):**
    - When the `selectedEvent` changes, load any previously generated and saved summary (using Chunk 12 mechanism via IPC) and display it in the Summary tab, along with which model generated it.

**Acceptance Criteria:**

- The "Generate Summary" button is enabled only when appropriate (transcript exists, LLM configured).
- Clicking the button prompts for LLM service selection if multiple are configured.
- A loading state is shown while waiting for the API response.
- Successful summaries are displayed clearly in the Summary tab.
- API or configuration errors are displayed clearly to the user.
- The UI allows regenerating a summary.
- Previously generated summaries are loaded and displayed when selecting a meeting.

**Technologies:** Electron (Renderer/Main), HTML, CSS, TypeScript, IPC. (UI Framework if used).
